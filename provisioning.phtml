<?
include("./global.inc");
page_open(
            array("sess" => "CDRTool_Session",
                  "auth" => "CDRTool_Auth",
                  "perm" => "CDRTool_Perm"));

$title="Provisioning interface";

if (is_readable("local/header.phtml")) {
    include("local/header.phtml");
} else {
    include("header.phtml");
}

$perm->check("admin");

include("provisioning_soap_library.phtml");
include("provisioning_logic.phtml");

$layout = new pageLayoutLocal();
$layout->showTopMenu();

// $soapEngines must be defined in global.inc

$SOAPEngine = new SOAPEngine($_REQUEST['service'],$soapEngines);
$_class     = $SOAPEngine->recordsClass;
$RECORDS    = new $_class(&$SOAPEngine,$extraFormElements);

if ($_REQUEST['action']=='Add') $RECORDS->addRecord();
if ($_REQUEST['action']=='Delete') $RECORDS->deleteRecord();

$RECORDS->listRecords();
$layout->showFooter();

print "
</body>
</html>
";

page_close();
?>