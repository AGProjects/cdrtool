cdrtool (4.8.1) unstable; urgency=low

  * Replaced E164Format function with a customizable class from global.inc:
    $CDRTool['normalize']['E164Class'] default instantiates E164_Europe
    See E164_Europe or E164_US in cdrlib.phtml for examples of how to customize
    the behaviour of the normalization function
  * Added MySQL stored procedure for auto-rotation of radacct table using
    radacctYYYMM table name format. Requires modification of sql.conf
    on the Freeradius server
  * Remove unused settings from global.inc:
     - CountryNumberLength
     - EnableSIPOnline 
     - MinPstnNumLen 
     - RotateThisMonth
     - RotateTables
     - memcache only if the OS is Debian which reads it from /etc/default/cdrtool
  * Set many defaults in the code to avoid explicit definitions in global.inc
  * Default pagination is now 15 records, which better fits one screen
  * Allow OpenSER subscriber login based on ha1 encrypted passwords 
  * Corrected the disposition mysql field in the Asterisk cdr table
  * Added invisible property for datasources in global.inc,
    useful to hide it from web elements like sip_trace datasource that
    cannot be directly accessed
  * Fixed media sessions statistics, IP traffic must be multiplied by
    two when both SIP UAs are outside the MediaProxy network
  * Fixed rating bug when either increment and minduration = 1

 -- Adrian Georgescu <ag@ag-projects.com>  Sat,  9 Dec 2006 10:20:53 +0100

cdrtool (4.8) unstable; urgency=low

  * Log updates of rating tables
  * Better display of log entries
  * Log access to Registrar, Media and Usage pages
  * Show the name of data sources in Log page
  * Fixed display of timezone in all main menu items
  * CDRTool version number points to the changelog
  * It is possible to mark individual sip traces as public

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 27 Nov 2006 16:23:59 +0100

cdrtool (4.7-8) unstable; urgency=low

  * Show cached usage only if showUsageFromCache is set in global.inc
  * Fixed relative link to style.css in login screen
  * Show friendly names for SIP Proxy machines in sip trace (see setup/global.inc.in)
  * Fixed filtering of media sessions for login accounts with domain filter
  * Added arrows to indicate SIP trace packet direction
  * Show small SIP UA images for incomming messages in SIP trace
  * Adjust trace to src/dst siptrace module fixes in OpenSER >= 1.1

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 25 Nov 2006 12:44:55 +0100

cdrtool (4.7-7) unstable; urgency=low

  * Write sql trace in daily tables (changed sql.conf in freeradius configuration)
  * Display platform total usage in OpenSER datasource (from cache)
  * Show transport protocol in SIP online
  * Fixed show domain details in sip online
  * Filter statistics depending on CDRTool login rights
  * Add links to statistrics screen from main menu
  * removed /var/www/CDRTool/scripts/generateHTMLUsageIndexFile.php
    /var/www/CDRTool/status/usage/index.phtml is generated on the fly
  * Fixed relative link to style.css

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 19 Nov 2006 13:41:15 +0100

cdrtool (4.7-6) unstable; urgency=low

  * Log the real SIP-Proxy-IP in radacct in place of NAS-IP-Address. Requires
    update of Freeradius server configuration (sql.conf and dictionary.ser)
    and OpenSER configuration
  * Added per customer settings to specify the minimum charged duration and
    time increments. For example it is possible to charge a minimum of 30
    seconds and round up the duration to every next 10 seconds.  Requires
    two new columns in billing_customers table (see alter_tables.mysql)
  * Fixed bugs in quotaCheck process, added quotaCompare.php script to check
    sync problems between the CDR usage and cached usage, removed cache for
    inbound traffic usage
  * Added new SIP UA pictures (Nokia, Scientific-Atlanta Webstar, Ekiga)
  * Fixed errors in building statistics for online totals
  * Authorized access to the Usage web page.
    /var/www/CDRTool/status/usage/index.html must be deleted
    /var/www/CDRTool/status/usage/index.phtml must be generated using
    /var/www/CDRTool/scripts/generateHTMLUsageIndexFile.php script
  * Show memcache capacity usage

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 16 Nov 2006 19:49:50 +0100

cdrtool (4.7-5) unstable; urgency=low

  * Fixed Reload of rating tables
  * Show SIP Proxy IP in CDR results screen
  * Fixed quota reset

 -- Adrian Georgescu <ag@ag-projects.com>  Wed,  1 Nov 2006 14:27:28 +0100

cdrtool (4.7-4) unstable; urgency=low

  * Fixed debian package deps to install by default php5-memcache
  * Allow login passwords greater than 10 characters
  * Minor HTML changes in OpenSER CDR display
  * Comment out double definitions present in freeradius server
  * Enabled SSL in example virtual host
  * Adjust maximum size of network traffic generated by MediaProxy
  * Consolidate media statistics per caller domain and add totals
  * Added 2 new settings to global.inc to filter zones for statistics

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 31 Oct 2006 12:12:59 +0100

cdrtool (4.7-3) unstable; urgency=low

  * Increased default memcache and php memory to 128MB
  * Fixed statistics to work with domains that have no online users
  * Corrected wrong example of memcache location in sample configuration file
  * Added style.css file to debian package

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 26 Oct 2006 12:20:57 +0200

cdrtool (4.7-2) unstable; urgency=low

  * Added monthly usage caches for SIP domains and platform total in and out
  * Improved display of SIP traces
  * Added new screenshots
  * Removed _darcs directory from the debian package
  * Use DB_ser database class if DB_online not defined
  * Add checks to mysql database creation script
  * Log balance updates from the web in prepaid_history table

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 22 Oct 2006 14:57:35 +0200

cdrtool (4.7-1) unstable; urgency=low

  * Renamed database class used by quota check system
  * Updated rating documentation 

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 11 Oct 2006 09:27:28 +0200

cdrtool (4.7-0) unstable; urgency=low

  * Improved the speed of normalization and quota processes with a factor > 10
    This requires the installation of a memcache server and setup of
    global.inc to point to the memcache server (default is 127.0.0.1:11212)
  * Added memcache to cdrtool startup script and /etc/default/cdrtool
  * A new database table cdrtool.memcache has been created to store data in mysql
    when a memcache server is not available (see setup/mysql/alter_tables.mysql)
  * Added graphical statistics for SIP online subscriber and MediaProxy usage
    Added a new cron script scripts/buildStatistics.php
  * Hide Sendmail button if CDR query has no description
  * Quota checks is now much faster by reusing incremental learned data
  * Cache SIP subscribers and domains into memcache
  * Cache destinations into memcache
  * Calls can be rated if the duration is greater than a minimum duration

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 29 Sep 2006 18:18:58 +0200

cdrtool (4.6-9) unstable; urgency=low

  * Added note about the dependency on the PHP SOAP library in doc/INSTALL.txt

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 19 Sep 2006 22:42:21 +0200

cdrtool (4.6-8) unstable; urgency=low

  * Fixed variable names in phplib to avoid the need for registering 
    global variables in php.ini
  * Tested CDRTool successfully against apache2/php5
  * Create CDRTool/local/images directory during installation
  * Remove sample apache configuration, is available in apache2
  * Updated apache 2 virtual host definition

 -- Adrian Georgescu <ag@ag-projects.com>  Sun,  3 Sep 2006 12:26:56 +0200

cdrtool (4.6-7) unstable; urgency=low

  * Update sample configuration for new installations
  * Update documentation of rating engine
  * Perform speeds test for the postpaid and prepaid applications
    (results are available in the rating engine documentation)
  * Removed Event-Timestamp from dictionary.ser, it is present now
    in freeradius standard distribution
  * Simplify default configuration
  * Remove unused declaration of table_missed
  * Replaced $cdr with $this->cdrtool and removed it from global.inc
  * Allocate more memory at start time from phplib

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 25 Aug 2006 14:01:21 +0200

cdrtool (4.6-6) unstable; urgency=low

  * Migrate from CVS to darcs version control
  * Set executable flag for php scripts after installation
  * Hide _darcs directory in apache
  * Log the loading of prepaid accounts during start-up

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 10 Aug 2006 15:57:20 +0200

cdrtool (4.6-5) unstable; urgency=low

  * Fixed search in query logs by string

 -- Adrian Georgescu <ag@ag-projects.com>  Tue,  8 Aug 2006 12:14:17 +0200

cdrtool (4.6-4) unstable; urgency=low

  * Added script to reload rating engine scripts/reloadRatingTables.php
  * cdrtool init.d script can reload the rating engine
  * Added sample configuration for monit in setup/monit/monitrc
  * Update description of 488 code 

 -- Adrian Georgescu <ag@ag-projects.com>  Mon,  7 Aug 2006 10:49:19 +0200

cdrtool (4.6-3) unstable; urgency=low

  * Properly put ratingEngine in background releasing the terminal

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Aug 2006 18:05:05 +0200

cdrtool (4.6-2) unstable; urgency=low

  * debian packaging improvements

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Aug 2006 17:12:05 +0200

cdrtool (4.6-1) unstable; urgency=low

  * Created CDRTool debian package
  * Added filter for listing the query log, users with admin right may
    select and edit all queries
  * Added a new index in the log table (see setup/mysql/alter_tables.mysql)

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 5 Aug 2006 11:17:56 +0200

