cdrtool (8.0.0) unstable; urgency=low

  [ Rating Engine ]

  * Fixed deblocking of users blocked by quota system
  * Apply the database changes from setup/mysql/alter_tables.mysql
  * Added support to debit balance for SMS
  * Separate calculate functions for Audio and SMS
  * Added import function for billing discounts
  * Added discounts per customer per destination
  * Added increment and min_duration per customer
  * Added daily_quota per data source setting and check quota usage based on it
  * Enlarged the login column in log table
  * Set daily_quota for new installations to 10%
  * Init the quota usage for today to 0 after quota reset
  * Improve syslog message for maxsessiontime
  * Use Subscriber instead of Account in rating tables display for consistency
  * Added discounts to the list of csv files to import
  * Rename profile name variables to match weekday and weekend
  * Added storage for daily quota
  * Log to syslog the result of maxsessiontime even if call is unlimited
  * Use sms or audio rate calculation depending on CDR type during normalization

  [ NGNPro Client ]

  * Hide Prepaid Card form for embedded clients
  * Define groups for enrollment of sip account in configuration
  * Use sender email when asking for cc payments

  [ WEB Output ]

  * Renamed applicationType to application and fixed display of streams information
  * Improved look and feel of main menu
  * Fixed broken main css
  * Added MediaInfo selection box and beautify code a bit
  * Fixed display of gateways in delete rules screen
  * Improved documentation
  * Improved display of media trace stream sequence
  * Refactor rating engine to use Region to group destinations
  * Update Blink logo

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 07 Jul 2010 10:19:12 +0200

cdrtool (7.1.1) unstable; urgency=low

  * Hide duration from quota table

  [ Normalization ]

  * Save call flow in radius table
  * Fixed call flow detection

  [ NGNPro Client ]

  * Apply the database changes from setup/mysql/alter_tables.mysql
  * Update translations
  * Improve sip settings payments tab
  * Fixed enrollment username checks
  * Fixed display of soap error
  * Fixed CC length check
  * Added identity checks for CC payments

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 29 Mar 2010 11:33:55 +0200

cdrtool (7.1.0) unstable; urgency=low

  * Added support for ICE negotiation (requires MediaProxy >=2.4.0)
    You must update Freeradius configuration with sql.conf and reload the
    stored procedures file radius_accounting.proc in the radius database
  * Insert/update sql queries in Freeradius sql.conf have been deprecated in
    favour of the stored procedure
  * Added EPC2203 user agent

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 22 Feb 2010 11:35:28 +0100

cdrtool (7.0.2) unstable; urgency=low

  [ WEB Output ]

  * Added Android user agent picture

  [ Normalization ]

  * Check if callee is local
  * Added /var/spool/cdrtool/normalize to debian directories
  * Added preliminary support for writing normalized CDRs to a file

  [ Rating Engine ]

  * Limit the number of simultaneous calls only if they have cost
  * Fixed test procedure call in documentation

  [ NGNPro Client ]

  * Added settings_url to the enrollment procedure
  * Check timezone provided by SIP device during enrollment
  * Set default account type for new sip accounts to prepaid
  * Fixed selecting Contact groups in Accept tab

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 24 Jan 2010 22:16:13 +0100

cdrtool (7.0.1) unstable; urgency=low

  * Added rounded corners for mozilla browsers
  * Added sms rigts for resellers and subscribers
  * Use text type in place of select for no-answer timeout
  * Fixed test stored procedure calls
  * Fixed bugs in enrollment for sip accounts

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 12 Jan 2010 09:38:24 +0100

cdrtool (7.0.0) unstable; urgency=low

   * You must update Freeradius configuration with sql.conf and reload the
     radius_accounting.proc in the radius database depending on your setup
   * You must apply the database changes from setup/mysql/alter_tables.mysql
   * CSV file import formats have been adjusted, to see the current format
     export the rating files to CSV after applying the database changes
   * The increment and min_duration fields have been moved from
     billing_rates and billing_customers to the destinations table

   [ CDR Storage ]

   * Added FromHeader radius attribute
   * Added UserAgent radius attribute
   * Added SIP-Application-Type radius attribute
   * If freeradius-xs package from AG Projects is used you must upgrade to
     the latest Freeradius-XS 1.1.7-4
   

  * Added Genexis, Arris_TM722b and Webstar SIP UA images
  * Show application type (audio, video, chat, message, file-transfer)
  * Improved parsing of User-Agent and Server headers in SIP trace
  * Print hostnames instead of IP address in SIP trace table header
    the hostnames can be set per datasource, see sample configuration file
  * Show Destination names when grouping the CDRs by destination id
  * Manage the number of maximum parallel sessions for each prepaid account

  [ Rating Engine ]

  * Added increment, min_duration, max_duration, max_price for each
    destination, the usage of these fields is described in RATING.txt
  * Removed increment, min_duration from billing_customers
  * Removed increment, min_duration from billing_rates
  * Removed increment, min_duration from billing_rates_history
  * Added max_sessions column to prepaid table
  * Added note in INSTALL.txt about creating the trusted peer table
  * Fixed billing tables indexes to contain the reseller_id column
  * Added normalization for SIP MESSAGE method
  * Added max_price and max_duration for each destination
  * Improved rating engine logging
  * Added note in documentation about setting the impersonate field to 0.0
  * Clean-up the start procedure of the rating engine
  * Return false if a mysql failure occurs during query in prepaid table
    instead of the mysql error text
  * Check the sanity of imported columns from CSV files
  * Log in syslog when loading broken destinations from the destination table
  * Log in syslog and e-mail the missing rates and destinations
  * Implement max_sessions for prepaid calls, default is one session
  * Fixed MySQL reconnection errors that could lead to engine shutdown
  * Check IP and port number before starting rating engine


  * NGNPro server 4.1.11 or later is required
  * Use admin credentials when update customers in administrator panels
  * Deactivate PSTN rights if is the first payment
  * Fixed init of quota for accounts in SIP Thor backend
  * Display results of multiple actions on SIP accounts
  * Added change_privacy_access_number, check_privacy_access_number,
    reject_anonymous_access_number
  * Check if reseller is allowed to perform prepaid changes
  * Added Blink enrollment
  * Added Credit Card transactions
  * Added translation files for SIP settings page
  * Add prepaid users to group prepaid
  * Added emergency_regions per engine
  * Added forwarding access codes per engine

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 17 Dec 2009 11:26:40 +0100

cdrtool (6.9.9) unstable; urgency=low

  * Added database keepalive features to workaround the 2006 mysql error
  * Add description for how to customize cdrtool classes
  * Added Fring UA images
  * Added example in config about subclassing opensips class
  * Replace geolocation lookup code with a function
  * Hide Dialable URI if contains wildcards
  * Hide barring tab and display more balance history entries
  * Added comment about purpose of sip_ files
  * Added sip enrollment
  * Added sip settings pages using digest and x509 auth
  * Improved look and feel of SIP settings page 
  * Fixed overwriting of DNS record type
  * Fixed display of geolocation in sip devices list
  * Print home node unknown if lookup fails
  * Use only first name when composing email notifications
  * Save owner with DNS fancy records
  * Fixed pstn rule selection box

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 09 Nov 2009 13:29:09 +0100

cdrtool (6.9.8) unstable; urgency=low

  * Use the debian provided geoip database and library. See docs/Install.txt
    for notes related to obtaining city level information
  * Fixed pstn gateway rule selection box
  * Added instructions for how to subclass the generic CDRS_opensips class
    in global.inc.complex.sample
  * Fixed no-answer timeout

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 21 Oct 2009 14:24:01 +0200

cdrtool (6.9.7) unstable; urgency=low

  * Added geoip.dat to debian package

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 14 Oct 2009 16:14:10 +0200

cdrtool (6.9.6) unstable; urgency=low

  * Improved SIP settings page
  * Renamed quota reset to quota deblock
  * Show ENUM range selection in numbers
  * Save email address used for SIP account registration
  * Fix display of SIP prepaid balance
  * Use fixed public contact from NGPro
  * Added more functions to the sip API
  * Remove adressbook export
  * Move geoip.dat in main directory
  * Added instructions for requesting client certificate
  * Added sip enrollment and sip settings using X.509
  * Rename variables and function names
  * Added links to export of client certificate in info tab
  * Moved Reject to Accept tab
  * Added Diversion tab
  * Removed Diversions from main settings page
  * Added Enrollment configuration template
  * Added more one shot functions for SIP account information
  * Moved user interface to renderUI library
  * Refactor sip_settings to handle X.509 client certificates
  * Renamed some variables for clarity

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 13 Oct 2009 23:14:08 +0200

cdrtool (6.9.5) unstable; urgency=low

  * Normalize.php script can chose a differet month
  * Allow argument to normalize.php script to chose a different month
  * Allow set of enum_generator for a reseller depending on ngnpro engine
  * Fix typo in sip_settings.php page

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 16 Sep 2009 15:36:32 +0200

cdrtool (6.9.4) unstable; urgency=low

  * Allow argument to normalize.php script to chose a differet month

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 10 Sep 2009 11:39:00 +0200

cdrtool (6.9.3) unstable; urgency=low

  * Fixed insert into prepaid table
  * Fixed url in PSTN gateways
  * Fixed column name in sip_trace table when purging
  * Fixed encoding of html links to sip and media trace
  * Fixed building statistics with online devices in OpenSIPS datasource

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Sep 2009 19:16:41 +0200

cdrtool (6.9.2) unstable; urgency=low

  * Added labbels for all SIP Thor network entities

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 29 Aug 2009 10:07:18 +0200

cdrtool (6.9.1) unstable; urgency=low

  * Added labbels for SIP Thor nodes
  * Updated freeradius pacthes from Norman Brandinger
  * Export X509 certificate associated with the SIP account

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 19 Aug 2009 16:13:21 +0200

cdrtool (6.9.0) unstable; urgency=low

  * Display geographic location using geo ip
  * Fixed variable names that did not match the config
  * Fixed logging of imported rows from csv files
  * Created two standard profiles (OpenSIPS and SipThor) for subscriber
    login, see class DomainAuthLocal extends OpenSIPS_DomainAuth in
    global.inc
  * Fixed export of CSV with prepaid history
  * Hide called address in missed session list
  * Refactored PSTN provisioning, NGNPro >= 4.1.5 is required
  * Show timezone in SIP accounts list
  * Display prepaid balance in SIP accounts list
  * Do not change quota when toggle the prepaid flag
  * Specify a default timezone per engine
  * Cache returns from lookup sip_proxy from Thor network

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 15 Jul 2009 23:45:32 +0200

cdrtool (6.8.1) unstable; urgency=low

  * Do  not send emails if no missed calls
  * Fixed search by username
  * Fixed import of billing_profiles
  * Notify also diverted sessions
  * Fix display of CDRs when logged in as SIP account, also show incoming
    calls

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 18 Jun 2009 08:49:20 +0200

cdrtool (6.8.0) unstable; urgency=low

  * Added reseller fields to all database tables to allow different login
    accounts to access their own data based on the account impersonate field
  * Allow import of CSV files from subdirectories (read updated 'Data
    partitioning for multiple resellers' section from RATING.txt)
  * Added prepaid_history table to rating table web management
  * Added increment and min_duration for each rate entry
  * Removed gateway, domain and subscriber columns from billing_profiles table
  * Removed gateway, domain and subscriber columns from billing_rates table
  * Removed gateway, domain and subscriber columns from billing_rates_history table
  * Updated CSV format for all rating tables to support the above changes,
    see setup/csv for updated examples of CSV files or export your live data
    from CDRTool rating tables page to see the new fields
  * Removed obsolete prepaid.call_lock and prepaid.call_in_progress columns
  * Removed obsolete customers.country_code column
  * Removed obsolete tables ratesNGN and profilesNGN
  * Renamed colummn prepaid_history.number with prepaid_history.description
  * Show SIP trace also in text only format
  * Do not log zero priced calls in prepaid_history table
  * Improved SIP prepaid provisioning screens
  * Skip math calculation for some rating tables
  * Added export balance history from SIP prepaid page
  * Updated ngnpro client to work with server version 4.1.1
  * Make stronger random passwords for SIP accounts
  * Improved NGNPro LCR functionality
  * Added scripts/OpenSIPS/notifyLastSessions.php to send email
    notifications containing the last sessions recived in the last 24 hours.
    You must set notifyLastSessions per data source to tru to enable this
    feature and put the susbcriber into missed_calls group
  * You must apply the changes from setup/mysql/alter_tables.mysql
  * You must add an integer `reseller_id` column to opensips.trusted and
    opensips.domain tables
  * Changed column prepaid_cards.value to decimal
  * Droped unused columns from prepaid table
  * Added a script to test the speed of the rating engine

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 24 May 2009 17:31:15 +0200

cdrtool (6.7.8) unstable; urgency=low

  * Updated NGNPro client to work with server version 4.1.0
  * Added functions for managing gateway rules
  * Fixed LCR provisioning bugs
  * Fixed gateway links from Carriers page
  * Make stronger random passwords for SIP accounts

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 20 Apr 2009 11:53:33 +0200

cdrtool (6.7.7) unstable; urgency=low

  * Fixed missing ENUMtld and Gateway in ShowPrice function

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 08 Apr 2009 23:08:45 +0200

cdrtool (6.7.6) unstable; urgency=low

  * Removed obsolete prepaid_lock feature
  * Apply the changes from setup/mysql/alter_tables.mysql
  * Floor the call duration to make the prepaid DebitBalance use the same
    duration as ShowPrice used by normalization process

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 04 Apr 2009 16:31:21 +0200

cdrtool (6.7.5) unstable; urgency=low

  * Fixed display of rating info

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 26 Mar 2009 14:31:06 +0100

cdrtool (6.7.4) unstable; urgency=low

  * Fixed reload of rating engine (thanks to Dan Bogos)

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 16 Mar 2009 18:49:11 +0100

cdrtool (6.7.3) unstable; urgency=low

  * Logging text improvements
  * Fixed bug with accessing $perm object when is not defined
  * Removed cached destinations on engine startup
  * Update Radius patches from Norm Brandinger norm@goes.com
  * Allow end-users to see more CDR details
  * Move ip address of sip proxy a bit to the left
  * Add sip_proxy to the statistics array even if no accounts are online
  * Added php5-gd to dependencies
  * Disable unnecessary mysql queries when quota is disabled
  * Better html text in sip login page
  * Added info about radius clients.conf (patch from aseques@gmail.com)
  * Removed pacth already applied to freeradius main tree
  * HTML changes in provisioning screens
  * Added information about how to generate debian package
  * Correct mysql upgrade queries

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 14 Mar 2009 23:50:44 +0100

cdrtool (6.7.2) unstable; urgency=low

  * Fixed number of columns in cdr when rating is disabled
  * Improve installation and rating documentation
  * Print errors when configuration items are missing from global.inc
  * Clean up call search page
  * Removed MediaProxy 1.0 sessions
  * Renamed in global.inc SourceIPRealmTranslation to domainTranslation_SourceIP
  * Print stream duration instead of stop time in media trace
  * Display a limited view of network topology for non-admin accounts
  * Fix login name used for logging

  [ NGNPro related changes ]
  * Added screen for sip login reminder
  * Added section about login account setup
  * Improve download instructions
  * Added falback billing profiles in sip settings page
  * Added vcard function
  * Do not use  reseller in the sip settings page link if account belongs to
    another reseller.
  * Added https key mapping
  * Display both sip_proxy and media_relay roles in SIP Thor circle

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 18 Jan 2009 13:11:58 +0100

cdrtool (6.7.1) unstable; urgency=low

  * Simplified the sample configuration file global.inc.simple.sample
  * Improved installation documentation 

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 19 Dec 2008 09:51:13 +0100

cdrtool (6.7.0) unstable; urgency=low

  * Migrated to OpenSIPS, this version is incompatible with OpenSER, do not
    upgrade to this version if you still use OpenSER
  * Added support for Call Control prepaid application from
    http://download.ag-projects.com/CallControl
  * Normalize the duration of prepaid CDRs to match the duration calculated
    by Call Control, this avoids price missmatch between debit price and
    the price calculated during normalization
  * Updated OpenSIPS radius dictionary
  * Updated Freeradius server setup procedure wiht OpenSIPS and MediaProry
    dictionaries
  * Added checks for values in rating tables changed from the web page
  * Improved retrieval and display of SIP traces from OpenSIPS
  * Improved retrieval and display of Media traces from MediaProxy
  * Reset the imported records counter before importing each csv file
  * Added new fields in billing_rates connectCostIn and durationRateIn to
    store the purchased price, the rating info now contains two prices for
    each call. The CSV format of rating table has been changed to support
    provisioning of purchased prices. Updated sample csv file for
    billing_rates. 
  * Improved rating documentationin general
  * Moved E164 class to cdr_generic.php and allow specification of which
    E164 class should be used for each datasource
  * Updated sample configuration files in setup/global.inc.*.sample
  * Added new columns to prepaid_history to store information about sessions
    that lead to debit balance
  * Log duration of prepaid sessions in prepaid_history table
  * Removed unused trafficRate from the rating engine and mysql tables
  * Added CallerId to SIP accounts in ENUM generator
  * Added support for new LCR engine from NGNPro4
  * Removed one empty column from ENUM records that had no mappings
  * Added domain column to the prepaid table
  * To upgrade you must apply the changes from doc/Upgrade.txt and
    setup/mysql/alter_tables.mysql

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 17 Dec 2008 14:13:54 +0100

cdrtool (6.6.10) unstable; urgency=low

  * Added Force=1 parameter to DebitBalance(), see PREPAID.txt for more info
  * Return none when destination id cannot be found (unlimited max session time)
  * More consistent return codes and logging messages for prepaid calls
  * Improve prepaid documentation

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 04 Oct 2008 12:36:04 +0200

cdrtool (6.6.9) unstable; urgency=low

  * Purge old entries from prepaid_history table
  * Fixed wrong return to call control engine becuase sessionDoesNotExist
    variable was not initialized properly at each request
  * Print the call id in the syslog when calculating rate

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 01 Oct 2008 00:11:35 +0200

cdrtool (6.6.8) unstable; urgency=low

  * Log debit balance to prepaid_history table

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 30 Sep 2008 05:19:58 +0200

cdrtool (6.6.7) unstable; urgency=low

  * Do not debit balance for inexistent prepaid sessions

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 28 Sep 2008 00:20:09 +0200

cdrtool (6.6.5) unstable; urgency=low

  * Fixed purging of expired prepaid sessions

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 26 Sep 2008 19:01:49 +0200

cdrtool (6.6.4) unstable; urgency=low

  * Added links to Prepaid calls and quota in the main menu
  * Fixed showFooter() when exporting csv files from rating page
  * Fixed prepaid table mysql schema

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 21 Sep 2008 01:39:00 +0200

cdrtool (6.6.3) unstable; urgency=low

  * Cache rate values from billing_rates table during MaxSessionTime to
    avoid mysql queries for the same values

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 12 Sep 2008 18:27:15 +0200

cdrtool (6.6.2) unstable; urgency=low

  * Fixed concurrent prepaid calls handling

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 09 Sep 2008 18:50:05 +0200

cdrtool (6.6.1) unstable; urgency=low

  * Fixed update of existing prepaid session
  * Return error text for maxsessiontime and debitbalance
  * Callid in maxsessiontime and debitbalance is mandatory
  * Preserve search criteria after delete sip account
  * Better logs for prepaid calls

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 09 Sep 2008 11:20:24 +0200

cdrtool (6.6.0) unstable; urgency=low

  * Allow simultaneous calls for prepaid accounts, see the Simultaneous
    prepaid calls section in doc/PREPAID.txt
  * Added pseudo code examples for call control engine
  * Apply the changes from setup/mysql/alter_tables.mysql
  * Added interface to kill ongoing sessions in Prepaid page

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 08 Sep 2008 13:37:20 +0200

cdrtool (6.5.8) unstable; urgency=low

  * Fixed wsdl for deleteGatewayGroup function

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 31 Aug 2008 17:19:06 +0200

cdrtool (6.5.7) unstable; urgency=low

  * Check custom properties for customer port before loading
  * Added defaultDomain filter to sample ngnpro_engines.inc
  * Better error logging when rating tables are  incorrectly provisioned
  * Show XCAP root in sip settings email notification
  * Fixed duplicate ENUM number is sip settings page

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 28 Aug 2008 14:36:45 +0200

cdrtool (6.5.6) unstable; urgency=low

  * Updated normalize logic for the case where the session received a broken
  BYE that did not generate a STOP while MediaProxy generated an UPDATE

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 22 Aug 2008 17:07:51 +0200

cdrtool (6.5.5) unstable; urgency=low

  * Fixed bug that allowed for some CDRs to remain in 'in progress' state.
    by setting ConnectInfo_stop explicitly to '' empty string. You must
    update radius configuration with sql.conf or reload the
    radius_accounting.proc in the radius database depending on your setup
  * Search by un-normalized calls with duration
  * Do not normalized calls in the web if more than 500 un-normalized calls.
  * Fixed sample config files
  * Better error printing when connection to databases fail
  * Print error when cannot connect to radius primary or secondary database
  * Fixed log of database class used for normalization

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 21 Aug 2008 10:05:55 +0200

cdrtool (6.5.4) unstable; urgency=low

  * Fixed save and retrieve of sip proxy server when add  DNS records for sip
  * Fixed wrong password reset because of web browsers that cache password fields
  * Preserve sip account quota value when toggling access to pstn
  * Added group by Canonical URI in CDR search screen
  * Fixed name of group used for blocking accounts (blocked instead of block)
  * Removed unused siplewire functionality

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 14 Aug 2008 12:06:06 +0200

cdrtool (6.5.3) unstable; urgency=low

  * Log id of inserted record into rating tables
  * Fixed broken links between group by SIP Proxy and search calls
  * Show quota reset even if not blocked
  * The soap server returns the object created for all add() functions
  * Added DNS complex records for sip, msrp, xmpp, thor
  * Added NGNPro fancy records management (email and url forwarding)
  * Added currency setting per soap engine and reseller
  * Many bug fixes in dns management port
  * Detect reseller zero in sip settings page
  * Show progress of loading quota
  * Added management for extra groups in Sip settings

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 21 Jul 2008 15:34:44 +0200

cdrtool (6.5.2) unstable; urgency=low

  * Fixed name of OpenSERQuota class in global.inc sample files
  * Fixed MySQL 2006 error for ReloadQuota function
  * Added NGNPro DNS port
  * Fixed required phone_images.php in sip settings page
  * Fixed REMOTE_ADDR variable
  * Fixed path of logo images
  * Show method used for blocking accounts by quota (db/soap)

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Jul 2008 19:53:59 +0200

cdrtool (6.5.1) unstable; urgency=low

  * Added support for MediaProxy 2.0 accounting
  * Added prepaid card generator in Rating section
  * Rewrite ratingEngine daemon to be non blocking 
  * Added IP access list to the ratingEngine $RatingEngine['allow']
  * Added new setting in global.inc called 'mediaDispatcher' to point to the 
    media dispatcher of MediaProxy 2, used to display media sessions
  * Added ShowClients command to rating engine
  * Removed support for php4
  * Fixed error related to MySQL gone away (2006)
  * Support prepaid calls to work with increment and min_duration settings 
  * Added web links between sip trace and media trace pages
  * Fixed ShowPrice rating engine command
  * Added /etc/cdrtool config directory
    Move CDRTool/local to /etc/cdrtool/local
  * Moved all library *_lib.phtml files to library/*.php
  * Changed csv import directory from /var/www/CDRTool/csv to /var/spool/cdrtool
  * Document split_rating_table feature in Rating.txt
  * Gateway attribute is now mandatory for MaxSessionTime and DebitBalance commands
  * Fixed update of Enum number selections
  * Moved setting $servers from status/config/media_servers.php to global.inc
    in each data source  as 'mediaServers' 
  * Default for split_rating_table is false (global.inc)
  * Added change password for sip accounts selection
  * Lowercase the email addresses and sip usernames
  * Update cron job, moved env LANG=C into php script
  * No mysql changes
  * After upgrading the software to this version run these actions:
    sudo mv /var/www/CDRTool/global.inc /etc/cdrtool/
    sudo mv /var/www/CDRTool/provisioning/ngnpro_engines.inc /etc/cdrtool/
    sudo rm -r /var/www/CDRTool/provisioning	
    sudo mv /var/www/CDRTool/local/images/* /var/www/CDRTool/images/
    sudo mv /var/www/CDRTool/local /etc/cdrtool/
    sudo rm -r /etc/cdrtool/local/images
    Edit /etc/cdrtool/global.inc and replace ser with openser in the line:
    $CDRToolModules=array("ser","asterisk","rating"); 
    and remove rating from it, example: 
    $CDRToolModules=array("openser","asterisk");
    Set "UserQuotaClass"=> "OpenSERQuota" in global.inc (it was SERQuota)
    Copy the value of $servers from /var/www/CDRTool/status/config/media_servers.php
    to /etc/cdrtool/global.inc $DATASOURCES['ser_radius']['mediaServers']
    sudo rm -r /var/www/CDRTool/status/config
    Add "db_class_siponline" => "DB_openser" to ser radius data source
    Remove memcache from monit configuration

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 29 Jun 2008 15:16:11 +0200

cdrtool (6.5.0) unstable; urgency=low

  * Completely removed memcache
  * Fixed update of rating history records from cvs files
  * Fixed pattern matching for cvs files containing rates_history
  * Update filename convention for rating csv files
  * Improve prepaid documentation
  * Improved Web comments in sip settings page
  * Anonymise prepaid balance update log
  * Hide billing profiles for non-resellers
  * Many fixes in the way various sip settings can be changed when logged in
    as subscriber customer or reseller
  * Added service sip to prepaid generator
  * Fixed customer properties update
  * Fixed update of sip properties
  * Added anonymous access number
  * Leave control to deblock user blocked by quota
  * Reset quota if account becomes prepaid
  * Added logic to change PSTN settings only if allowed by customer properties
  * Display previously blocked users in quota notification
  * Fixed sip trace hop to other node by passing totag
  * Only destination table requires reload after changing data in rating tables
  * Do not cache prepaid balance, use mysql instead
  * Return error when maxsessiontime command of rating engine encounters one
  * Do not require reload after update of prepaid table
  * display to and from tags, hide enum tld if none
  * Removed unused functions and show in trace the msg size
  * Toggle prepaid without using groups
  * Removed EnableNetworkRating setting from global.inc
  * No mysql changes

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 23 May 2008 10:06:51 +0200

cdrtool (6.4.1) unstable; urgency=low

  * Fixed trace ip:port when SDP has lines in reverse order
  * Show sip trace in web window title
  * Find if an IP is Thor node by querying the network
  * Log quota value
  * Added totag to getTrace
  * Renamed soap function getTrace to getSipTrace
  * Added toTag to getTrace from SIPThor
  * Added readonly rights for login accounts to deny changes to rates or
    re-normalization process
  * Move in global.inc $CDRTool['rating']['reportMissingRates'] to
    $RatingEngine['reportMissingRates']
  * Removed unused library
  * Show home node if not logged in as subscriber
  * Removed Prio field not used by PDNS
  * Show Owner field in search form for SIP and ENUM records

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Apr 2008 12:04:30 +0200

cdrtool (6.4.0) unstable; urgency=high

  * Refactor quota system to work with millions of sip accounts
  * Removed memcache usage for quota
  * Fixed voicemail divert setting
  * Separate unblock quota from init quota operation
    Added domain and notified columns to quota_usage
    Show quota_usage table in rating section
  * Fixed syncronization of quota and blocked by quota
  * Use normalized lock during init of quota to avoid race conditions
  * Added quota_usage table
    Must apply mysql changes from setup/mysql/alter_tables.mysql
  * Allow for empty prefixes in PSTN routes
  * Fixes in update of impersonate field

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 24 Mar 2008 19:32:57 +0100

cdrtool (6.3.2) unstable; urgency=low

  * Log for how many account the CDRs are loaded to rebuild the quota count

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 20 Mar 2008 11:30:06 +0100

cdrtool (6.3.1) unstable; urgency=low

  * Filter CDRs for local domains when init quota counters
  * A subaccount cannot change his own impersonate field
  * Replaced _serialize function with previos pear soap version to fix empty
    array reprezentation

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 19 Mar 2008 14:22:26 +0100

cdrtool (6.3.0) unstable; urgency=low

  * Boost the speed of the rating engine from 100% to 1000% depending on
    the complexity of the rating tables
  * Fixed set of delimiter from global.inc setting when exporting csv files
  * Added GetEntityProfiles command to rating engine
  * Return json encoded for GetPrepaidHistory
  * Added script to create partial billing_rates tables
  * Moved $CDRTool['rating'] settings to $RatingEngine in global.inc
  * Added $RatingEngine['split_rating_table'] option to query rating data in
    multiple tables, each table name is autogenerated from the
    billing_rates.name field
  * Fixed set of timeout for each SOAP connection
  * Adjust some column lengths
    Must apply setup/mysql/alter_tables.mysql

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 08 Mar 2008 15:56:12 +0100

cdrtool (6.2.3) unstable; urgency=low

  * Print information about the normalize lock in syslog and to stdout
  * Log if rating engine takes more time to complete. Must set
    $RatingEngine['log_delay'] to a value in micro seconds in global.inc and
    restart ratingEngine
  * Small html changes in sip settings page
  * Renamed RatingEngine object to differ from the same setting name from global.inc

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 01 Mar 2008 13:09:09 +0100

cdrtool (6.2.2) unstable; urgency=low

  * Added setting in global.inc $RatingEngine['prepaid_lock'] to enable
    multiple parallel calls using the same prepaid account, this is done by
    disabling the lock (setting it to 0 or false). Disable the lock only if
    you accept that the balance might become negative
  * Added email filter to Sip->getAccounts()
  * Log the call start time in the head of rating info to eliminate
    the confusion when rating calls that span multiple profiles
  * Show total call duration in rate info head
  * Use <voice-mailbox> instead of absolute URIs for call diversions
  * Removed unnecessary code used in the past for replication of changes to remote soap engine
  * Fixed replication of customer account to remote platform
  * Add active_master to replicatedDatabases in global.inc
  * Added web link between sip target and sip_accounts
  * Rewrite of mysql monitoring functions
  * Added DeleteBalance and DeleteBalance History commands to rating engine
  * Use colors in mysql replication status
  * Added posibility to replicate customer entries in Customer Port
  * Added getPrepaidHistory function to the rating engine
  * Replaced false with 0 and true with 1 for the return values from rating engine
  * Show database ip address when replication monitor returns an error
  * Fixed name of sip_ports settings
  * Added setup/crontabs directory for non debian installations

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 27 Feb 2008 13:00:21 +0100

cdrtool (6.2.1) unstable; urgency=low

  * Correct update of radius records when mediaproxy field is NULL or !timeout
    You  must reload the sql stored procedures from
    setup/radius/OpenSER/radius_accounting.proc or
    update Freeradius with setup/radius/OpenSER/sql.conf
    when not using the stored procedures
  * Log add balance to prepaid_history table

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 12 Feb 2008 19:32:04 +0100

cdrtool (6.2.0) unstable; urgency=high

  * Fixed corrupted phone_images.php file

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 12 Feb 2008 14:08:18 +0100

cdrtool (6.1.9) unstable; urgency=low

  * Fixed memory leak related to calling the same soap function several times
  * Added separate access numbers for FUNV, FBUS, FNOL, FNOA
  * Fixed load of customer properties in ngnpro client
  * Support multiple clusters for mysql replication monitor
  * Fixed vulnerability related to missing BYE and MediaProxy
    radius Update action (reported by Inaki Baz Castil)
    You  must reload the sql stored procedures from
    setup/radius/OpenSER/radius_accounting.proc or
    update Freeradius with setup/radius/OpenSER/sql.conf
    when not using the stored procedures
  * Specify if output of soap functions is html formatted or not

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 12 Feb 2008 03:34:45 +0100

cdrtool (6.1.8) unstable; urgency=low

  * Fixed mrtg buildStatistics call in cron.d (env LANG=C)
  * Added web page to show replications status and dynamic
    instructions about how to fix it
  * Replace $CDRTool['mysql_clusters'] in global.inc with 
    $replicated_databases (see setup/global.inc.in for syntax)
  * Delete DB1 and DB2 definitions from global.inc

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 06 Feb 2008 08:58:37 +0100

cdrtool (6.1.7) unstable; urgency=low

  * Set mobile_number per SIP account
  * Add sip_accounts_lite to soap engine settings
  * Update voicemail full name when sip account firstname or lastname changes
  * Create templates_c dir required by smarty
  * Added templates directory for sending welcome note

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 04 Feb 2008 18:46:30 +0100

cdrtool (6.1.6) unstable; urgency=low

  * Fixed load of customer profiles for prepaid calls when 
    no default customer defined

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 03 Feb 2008 00:28:15 +0100

cdrtool (6.1.5) unstable; urgency=low

  * Added lock icon when SIP UA registered using TLS contact
  * Added more information about renormalizing prepaid calls
  * Show port number and transport protocol in sip trace
  * Group trace message per IP instead of ip:port
  * Added welcome message per soap engine
  * Show error message when ngnpro client is not configured
  * Fixed link from sip domains to sip aliases page
  * Fixed ENUM soap port authentication in sip settings page
  * Replaced DB_ser with DB_openser
    Edit global.inc and replace DB_ser with DB_openser
  * Increased curl timeout for bulk SOAP operations
  * Return price in debit balance

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 31 Jan 2008 16:11:56 +0100

cdrtool (6.1.4) unstable; urgency=low

  * Remove sample mrtg files

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 10 Jan 2008 10:13:00 +0100

cdrtool (6.1.3) unstable; urgency=high

  * Fixed calculation of rating profiles when using having specific
    gateways/domains/subscribers
  * Fixed default port alocation for NGNPro version < 3
  * Allow set of reseller 0.0 (admin) in login account
  * Show SipThor node in Sip settings title bar
  * Fixed management of presence rules
  * Fixed link from Sip accounts to sip settings page

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 09 Jan 2008 22:17:11 +0100

cdrtool (6.1.2) unstable; urgency=high

  * Fixed detection of CDR duration when minimumDuration was set

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 08 Jan 2008 11:18:35 +0100

cdrtool (6.1.1) unstable; urgency=low

  * Corrected default login account sql insert statement

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 07 Jan 2008 21:44:39 +0100

cdrtool (6.1.0) unstable; urgency=low

  * Fixed update of billing_rates entries from csv files
  * Overwrite defaults from sip_settings class per NGNPro connection
  * Added contrib directory
  * Added freeradius patch for freeradius cvs version from Norm Brandinger
  * Log progress of importing rating files
  * Show rating engine daemon uptime in syslog
  * Many fixes in provisioning client
  * Lookup customers and rates in MySQL, there is no memory limit anymore
  * Importing rating does not lock the rating engine anymore
  * Fixed billing of calls over the minimum duration

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Jan 2008 11:52:19 +0100

cdrtool (6.0) unstable; urgency=low

  * Fixed links from Group-by output to discrete CDRs
  * After renormalization, re-cache the monthly usage only for the accounts
    that had CDRs changed during renormalization
  * Fixed application type for rating engine (default application is audio)
  * Added info to ENUM generator
  * Fixed node IP parsing in sip trace
  * Fixed default login account creation
  * Don't log ENUM tld in rate info if is set to none
  * Added RatingProfiles management in sip settings page
  * Added prepaid_cards management in Rating tables page
  * Fixed name of domain table when SIP Thor data-source is enabled
  * Added link in the trace window to jump to a different SIP Proxy
  * Import/export delimiter for rating tables can be adjusted, default is ,
  * Must apply database structure changes from setup/mysql/alter_tables.mysql
  * NGNPro client completed
  * Save settings before existing provisioning pages

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 18 Dec 2007 10:42:06 +0100

cdrtool (5.3.3) unstable; urgency=low

  * Fixed ENUM tld match and logging
  * Show visual ENUM usage
  * Provisioning engine update

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 23 Oct 2007 23:09:27 +0200

cdrtool (5.3.2) unstable; urgency=low

  * Fixed memory leak

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 16 Oct 2007 20:12:55 +0200

cdrtool (5.3.1) unstable; urgency=low

  * Removed reference to soapFilter which was unused
  * Skip ENUM tld 'none' in discounts
  * Update presence functions in provisioning client
  * Fixed initalization of gatewaygroups
  * Add function for showing customer text box
  * Allow specification of custom port names and classes per reseller
  * Fixed phplib typo that caused crash on php5

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 16 Oct 2007 19:13:26 +0200

cdrtool (5.3.0) unstable; urgency=low

  * Added ENUM tld based discounts in the rating engine
  * Added ENUM tld management in the Rating page
  * Renamed field radius.Framed-Protocol to radius.ENUMtld to accomodate
    discounts based on ENUM top level domain. This functionality requires
    changes to the database structures and reconfigure several components:
    See doc/Upgrade.txt and setup/mysql/alter_tables.mysql for more information
  * Removed unused SOAP directory
  * Added NGNPro client provisioning library
  * Added sip settings page
  * Added new rights for provisioning tasks
  * Change main menu item names

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 11 Oct 2007 10:12:38 +0200

cdrtool (5.2.6) unstable; urgency=low

  * Log in syslog the duration of reloading of the rating tables and 
   of the sip accounts into memcacche

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 04 Sep 2007 19:06:31 +0200

cdrtool (5.2.5) unstable; urgency=low

  * Replaced multiple SOAP definitions from global.inc with a pointer 
    to an entry from the $soapEngines defined in soap_engines.inc
  * Fixed read of HTTP vars in sip trace, public traces are now visible 
    when global vars are turned off

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 03 Sep 2007 12:13:57 +0200

cdrtool (5.2.4) unstable; urgency=low

  * Skip billing_rates.trafficRate absent from csv import
  * Update rating documentation
  * Added link to FreeRADIUS-CDRTool by Dan-Cristian Bogos
  * Fixed sip trace purging
  * Fix for virtualhost allowing .htaccess customization for cdrtool

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 21 Aug 2007 10:02:49 +0200

cdrtool (5.2.3) unstable; urgency=low

  * Allow usernames without domain part in quota check
  * Added publish of SIP domain statistics using SIP SIMPLE

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 31 Jul 2007 13:14:43 +0200

cdrtool (5.2.2) unstable; urgency=low

  * Added SIP trace for SIP Thor datasource

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 19 Jul 2007 11:53:24 +0200

cdrtool (5.2.1) unstable; urgency=low

  * Synced UPDATE queries for current and older month (in SQL stored procedures)
  (you must apply changes from setup/mysql/alter_tables.mysql)

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 03 Jul 2007 17:25:52 +0200

cdrtool (5.2.0) unstable; urgency=low

  * Eliminate the race condition that appears when normalization process is
  performed between the time radius database is updated when a BYE arrives
  and the MediaProxy updates the same radius record. 

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 03 Jul 2007 14:51:40 +0200

cdrtool (5.1.9) unstable; urgency=low

  * Removed print of sql query

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 28 Jun 2007 18:26:27 +0200

cdrtool (5.1.8) unstable; urgency=low

  * Fixed saving the agreement with license page

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 28 Jun 2007 10:21:39 +0200

cdrtool (5.1.7) unstable; urgency=low

  * Added SOAP/XML management for LCR
  * Save when the user agrees with the usage license to avoid display the
  license agreement at each login

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 24 Jun 2007 13:16:32 +0200

cdrtool (5.1.6) unstable; urgency=low

  * Fixed calculus of historical rates when rate is found in alternative
  profile

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 19 Jun 2007 09:35:39 +0200

cdrtool (5.1.5) unstable; urgency=low

  * Hide price when grouping results for login accounts without showPrice right

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 07 Jun 2007 10:01:32 +0200

cdrtool (5.1.4) unstable; urgency=low

  * Fixed a typo in cdrlib.phtml

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 14 May 2007 08:47:24 +0200

cdrtool (5.1.3) unstable; urgency=low

  * Fixed pagination of exported records

 -- Adrian Georgescu <ag@ag-projects.com>  Wed,  2 May 2007 12:30:27 +0200

cdrtool (5.1.2) unstable; urgency=low

  * Show status of multiple mysql clusters
    Must migrate global.inc setting $CDRTool['replicated_databases'] to $CDRTool['mysql_clusters']
    See setup/global.inc.in for example

 -- Adrian Georgescu <ag@ag-projects.com>  Tue,  1 May 2007 10:16:37 +0200

cdrtool (5.1.1) unstable; urgency=low

  * Updated sample data for rating tables
  * Updated mysql schema
  * Fixed bug in csv import script

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 29 Apr 2007 11:35:09 +0200

cdrtool (5.1.0) unstable; urgency=low

  * Added historical rating engine, requires changes in database
    structure (you must apply changes from setup/mysql/alter_tables.mysql)
  * Must add in global.inc "AccountsDBClass"    => "DB_ser" for
    each SER data-source, there is no default anymore
  * Added a sample provisioning interface (MSP only)
  * Added function to obfuscate caller Ids, this changes the login rights
    The login accounts rights must be updated in the Accounts page
  * Added capability to do accounting for SIP URIs (e.g. paid helpdesk)
  * Improved compatibility with Firefox in media sesessions screen
  * Added rights for login accounts to show pricing and caller id
  * Removed unused NGN rating (billing_customers table has been modified,
    please update your CSV file import tools)
  * Modify index of rates tables to accomodate multiple applications
    (you must apply changes from setup/mysql/alter_tables.mysql)
  * Default application set to 'audio', application field is now mandatory
    when importing rates CSV files
  * Added SIP Thor enable per data-source
  * Use separate name spaces for memcache keys per data source
  * Allow quota checks for multiple OpenSER data-sources
  * Show memory usage in syslog
  * Print sql errors in syslog 

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 15 Apr 2007 10:19:07 +0200

cdrtool (5.0.10) unstable; urgency=low

  * Fixed reload of prepaid accounts from rating page to reload only the
  prepaid account that has changed (when PHP register_globals if off)
  * Fixed logging in prepaid history table 

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 31 Jan 2007 17:04:48 +0100

cdrtool (5.0.9) unstable; urgency=low

  * Added /var/www/CDRTool/scripts/replicationStatus.php
    script to easily check the database replication process
    Add to global.inc $CDRTool['replicated_databases']=array('DB1','DB2');
    and defined DB1 and DB2 connections to the mysql databases that 
    replicate to each other. The connections must use the same IP 
    addresses and usernames used during the setup of the replication process

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 20 Jan 2007 16:14:09 +0100

cdrtool (5.0.8) unstable; urgency=low

  * Enable failover between CDR databases for normalization process 
    db_class can be an array with database connection classes 
  * Removed db_class_readonly from global.inc

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 20 Jan 2007 12:03:19 +0100

cdrtool (5.0.7) unstable; urgency=low

  * Fixed version to be compliant with debian native version numbering

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 10 Jan 2007 13:54:33 +0100

cdrtool (5.0-6) unstable; urgency=low

  * Avoid unnecessary sql OR clause in CDR search that caused slow queries

 -- Adrian Georgescu <ag@ag-projects.com>  Mon,  8 Jan 2007 08:37:02 +0100

cdrtool (5.0-5) unstable; urgency=low

  * Fixed determination of previous year in update_raddact_record_mediaproxy
    Consolidate SET statements to minimize binary log entries. Fixed bug in
    update_raddact_record_mediaproxy, the record values were reset after
    execution of update on the first table causing failure to update the
    previous table. setup/radius/OpenSER/radius_accounting.proc must be
    reloaded into the MySQL server:
    mysql -u root -p -h sipdb radius <  setup/radius/OpenSER/radius_accounting.proc
  * Use same CDR structure for MaxSessionTime and DebitBalance
  * Change logging for prepaid actions to fit one line
  * Normalize tries previous month if no record has been updated
  * Mention how to see prepaid account status
  * Updated rating docs
  * Moved E164 class to phplib/local.inc
  * Show accounts with quota that exceeded a certain treshold
    scripts/SER/quotaShowAccounts.php treshhold
  * Added documentation for the Quota system (doc/QuotaSystem.txt)
  * Use normalization lock per table using GET_LOCK() server function
    http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html
    This provided faster web response when multiple clients access the
    interface
  * Fixed confirmation for delete operations in rating tables when global
    vars are turned off in php.ini

 -- Adrian Georgescu <ag@ag-projects.com>  Thu,  4 Jan 2007 15:32:52 +0100

cdrtool (5.0-4) unstable; urgency=low

  * Better logging of prepaid calls in progress
  * Added reloadPrepaidAccounts function to avoid reload of all rating tables
    when only one prepaid account has changed
  * Updated rating documentation
  * Corrected some lintian errors for debian packaging

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 27 Dec 2006 11:53:09 +0100

cdrtool (5.0-3) unstable; urgency=low

  * Fixed re-normalization of calls in previous monthly tables
  * Fixed cached storage after re-normalize calls for previous months
  * Clean ups in import csv files functions

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 21 Dec 2006 12:45:13 +0100

cdrtool (5.0-2) unstable; urgency=low

  * The Import script for the rating files automatically detects if
    a file has been previously imported and skips it
  * Hide non-existent radius tables from datasource selection
  * Fixed indexes of rating tables (see alter_tables.mysql)
  * Fixed errors present in CSV import functions
  * Added Country_code per customer, can be used within normalization class

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 21 Dec 2006 12:37:31 +0100

cdrtool (5.0-1) unstable; urgency=low

  * Added scripts to display quota usage and settings
  * Avoid duplicate tables in data source selection

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 18 Dec 2006 16:51:08 +0100

cdrtool (5.0) unstable; urgency=low

  * Added support for MediaProxy accounting using Radius. Upgrade to
    mediaproxy version >=1.8.0 is required to use this feature
  * Added MySQL stored procedure for auto-rotation of radacct table using
    radacctYYYMM table name format. This avoids manual purging of accounting
    tables and the need for optimization of indexes, which can lock database
    tables for writing and cause downtime. Requires modification of sql.conf
    based on setup/radius/OpenSER/radius_accounting.conf, recompilation of
    Freeradius server with CLIENT_MULTI_RESULTS flag enabled for mysql
    connections and mediaproxy >= 1.8.0. See the documentation from
    setup/radius/OpenSER/radius_accounting.proc for more information
  * Added new patch for freeradius setup/radius/freeradius/freeradius.patch
  * Replaced the E164Format function with a customizable class from
    global.inc: $CDRTool['normalize']['E164Class'] that default instantiates
    E164_Europe. See E164_Europe or E164_US in cdrlib.phtml for examples of
    how to customize the behaviour of the normalization function
  * Remove unused settings from global.inc: CountryNumberLength,
    EnableSIPOnline, MinPstnNumLen, RotateThisMonth, RotateTables,
    normalize0SecCalls and memcache (only if the OS is Debian, which reads
    it from /etc/default/cdrtool)
  * Set many defaults in the code to avoid explicit definitions in global.inc
  * Default pagination is now 15 records, which better fits one 1024/768 screen
  * Allow OpenSER subscriber login in CDRTool based on ha1 encrypted passwords
  * Corrected the disposition mysql field in the Asterisk cdr table
  * Added invisible property for datasources in global.inc,
    useful to hide it from web elements like sip_trace datasource that
    cannot be directly accessed
  * Fixed media sessions statistics, IP traffic must be multiplied by
    two when both SIP UAs are outside the MediaProxy network
  * Fixed rating bug when either increment and minduration = 1
  * Fixed pid file name of ratingEngine in /etc/init.d/cdrtool
  * Updated term and conditions page displayed after login
  * Log when quota has been exceeded
  * Fixed logging of normalized totals
  * More clear syslog logging statements
  * Update rotate table logic

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 14 Dec 2006 20:33:26 +0100

cdrtool (4.8) unstable; urgency=low

  * Log updates of rating tables
  * Better display of log entries
  * Log access to Registrar, Media and Usage pages
  * Show the name of data sources in Log page
  * Fixed display of timezone in all main menu items
  * CDRTool version number points to the changelog
  * It is possible to mark individual sip traces as public

 -- Adrian Georgescu <ag@ag-projects.com>  Mon, 27 Nov 2006 16:23:59 +0100

cdrtool (4.7-8) unstable; urgency=low

  * Show cached usage only if showUsageFromCache is set in global.inc
  * Fixed relative link to style.css in login screen
  * Show friendly names for SIP Proxy machines in sip trace (see setup/global.inc.in)
  * Fixed filtering of media sessions for login accounts with domain filter
  * Added arrows to indicate SIP trace packet direction
  * Show small SIP UA images for incomming messages in SIP trace
  * Adjust trace to src/dst siptrace module fixes in OpenSER >= 1.1

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 25 Nov 2006 12:44:55 +0100

cdrtool (4.7-7) unstable; urgency=low

  * Write sql trace in daily tables (changed sql.conf in freeradius configuration)
  * Display platform total usage in OpenSER datasource (from cache)
  * Show transport protocol in SIP online
  * Fixed show domain details in sip online
  * Filter statistics depending on CDRTool login rights
  * Add links to statistrics screen from main menu
  * removed /var/www/CDRTool/scripts/generateHTMLUsageIndexFile.php
    /var/www/CDRTool/status/usage/index.phtml is generated on the fly
  * Fixed relative link to style.css

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 19 Nov 2006 13:41:15 +0100

cdrtool (4.7-6) unstable; urgency=low

  * Log the real SIP-Proxy-IP in radacct in place of NAS-IP-Address. Requires
    update of Freeradius server configuration (sql.conf and dictionary.ser)
    and OpenSER configuration
  * Added per customer settings to specify the minimum charged duration and
    time increments. For example it is possible to charge a minimum of 30
    seconds and round up the duration to every next 10 seconds.  Requires
    two new columns in billing_customers table (see alter_tables.mysql)
  * Fixed bugs in quotaCheck process, added quotaCompare.php script to check
    sync problems between the CDR usage and cached usage, removed cache for
    inbound traffic usage
  * Added new SIP UA pictures (Nokia, Scientific-Atlanta Webstar, Ekiga)
  * Fixed errors in building statistics for online totals
  * Authorized access to the Usage web page.
    /var/www/CDRTool/status/usage/index.html must be deleted
    /var/www/CDRTool/status/usage/index.phtml must be generated using
    /var/www/CDRTool/scripts/generateHTMLUsageIndexFile.php script
  * Show memcache capacity usage

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 16 Nov 2006 19:49:50 +0100

cdrtool (4.7-5) unstable; urgency=low

  * Fixed Reload of rating tables
  * Show SIP Proxy IP in CDR results screen
  * Fixed quota reset

 -- Adrian Georgescu <ag@ag-projects.com>  Wed,  1 Nov 2006 14:27:28 +0100

cdrtool (4.7-4) unstable; urgency=low

  * Fixed debian package deps to install by default php5-memcache
  * Allow login passwords greater than 10 characters
  * Minor HTML changes in OpenSER CDR display
  * Comment out double definitions present in freeradius server
  * Enabled SSL in example virtual host
  * Adjust maximum size of network traffic generated by MediaProxy
  * Consolidate media statistics per caller domain and add totals
  * Added 2 new settings to global.inc to filter zones for statistics

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 31 Oct 2006 12:12:59 +0100

cdrtool (4.7-3) unstable; urgency=low

  * Increased default memcache and php memory to 128MB
  * Fixed statistics to work with domains that have no online users
  * Corrected wrong example of memcache location in sample configuration file
  * Added style.css file to debian package

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 26 Oct 2006 12:20:57 +0200

cdrtool (4.7-2) unstable; urgency=low

  * Added monthly usage caches for SIP domains and platform total in and out
  * Improved display of SIP traces
  * Added new screenshots
  * Removed _darcs directory from the debian package
  * Use DB_ser database class if DB_online not defined
  * Add checks to mysql database creation script
  * Log balance updates from the web in prepaid_history table

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 22 Oct 2006 14:57:35 +0200

cdrtool (4.7-1) unstable; urgency=low

  * Renamed database class used by quota check system
  * Updated rating documentation 

 -- Adrian Georgescu <ag@ag-projects.com>  Wed, 11 Oct 2006 09:27:28 +0200

cdrtool (4.7-0) unstable; urgency=low

  * Improved the speed of normalization and quota processes with a factor > 10
    This requires the installation of a memcache server and setup of
    global.inc to point to the memcache server (default is 127.0.0.1:11212)
  * Added memcache to cdrtool startup script and /etc/default/cdrtool
  * A new database table cdrtool.memcache has been created to store data in mysql
    when a memcache server is not available (see setup/mysql/alter_tables.mysql)
  * Added graphical statistics for SIP online subscriber and MediaProxy usage
    Added a new cron script scripts/buildStatistics.php
  * Hide Sendmail button if CDR query has no description
  * Quota checks is now much faster by reusing incremental learned data
  * Cache SIP subscribers and domains into memcache
  * Cache destinations into memcache
  * Calls can be rated if the duration is greater than a minimum duration

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 29 Sep 2006 18:18:58 +0200

cdrtool (4.6-9) unstable; urgency=low

  * Added note about the dependency on the PHP SOAP library in doc/INSTALL.txt

 -- Adrian Georgescu <ag@ag-projects.com>  Tue, 19 Sep 2006 22:42:21 +0200

cdrtool (4.6-8) unstable; urgency=low

  * Fixed variable names in phplib to avoid the need for registering 
    global variables in php.ini
  * Tested CDRTool successfully against apache2/php5
  * Create CDRTool/local/images directory during installation
  * Remove sample apache configuration, is available in apache2
  * Updated apache 2 virtual host definition

 -- Adrian Georgescu <ag@ag-projects.com>  Sun,  3 Sep 2006 12:26:56 +0200

cdrtool (4.6-7) unstable; urgency=low

  * Update sample configuration for new installations
  * Update documentation of rating engine
  * Perform speeds test for the postpaid and prepaid applications
    (results are available in the rating engine documentation)
  * Removed Event-Timestamp from dictionary.ser, it is present now
    in freeradius standard distribution
  * Simplify default configuration
  * Remove unused declaration of table_missed
  * Replaced $cdr with $this->cdrtool and removed it from global.inc
  * Allocate more memory at start time from phplib

 -- Adrian Georgescu <ag@ag-projects.com>  Fri, 25 Aug 2006 14:01:21 +0200

cdrtool (4.6-6) unstable; urgency=low

  * Migrate from CVS to darcs version control
  * Set executable flag for php scripts after installation
  * Hide _darcs directory in apache
  * Log the loading of prepaid accounts during start-up

 -- Adrian Georgescu <ag@ag-projects.com>  Thu, 10 Aug 2006 15:57:20 +0200

cdrtool (4.6-5) unstable; urgency=low

  * Fixed search in query logs by string

 -- Adrian Georgescu <ag@ag-projects.com>  Tue,  8 Aug 2006 12:14:17 +0200

cdrtool (4.6-4) unstable; urgency=low

  * Added script to reload rating engine scripts/reloadRatingTables.php
  * cdrtool init.d script can reload the rating engine
  * Added sample configuration for monit in setup/monit/monitrc
  * Update description of 488 code 

 -- Adrian Georgescu <ag@ag-projects.com>  Mon,  7 Aug 2006 10:49:19 +0200

cdrtool (4.6-3) unstable; urgency=low

  * Properly put ratingEngine in background releasing the terminal

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Aug 2006 18:05:05 +0200

cdrtool (4.6-2) unstable; urgency=low

  * debian packaging improvements

 -- Adrian Georgescu <ag@ag-projects.com>  Sun, 06 Aug 2006 17:12:05 +0200

cdrtool (4.6-1) unstable; urgency=low

  * Created CDRTool debian package
  * Added filter for listing the query log, users with admin right may
    select and edit all queries
  * Added a new index in the log table (see setup/mysql/alter_tables.mysql)

 -- Adrian Georgescu <ag@ag-projects.com>  Sat, 5 Aug 2006 11:17:56 +0200

